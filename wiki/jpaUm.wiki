#summary Persistindo uma instância com JPA (Fábio Nogueira de Lucena)

=== Onde obter ===
[http://exemplos.googlecode.com/svn/trunk/ejb3/jpaUm/]

= Introdução =

O que é preciso para persistir instâncias de uma classe (como aquela abaixo)?

{{{
public class Pessoa {
    private String nome;
	
    public Pessoa(String nome) {
	this.nome = nome;
    }
	
    public String toString() {
	return nome;
    }
}
}}}


= Resumo de atividades para persistir instâncias de uma classe =
 * _Mapear a classe em questão_. Isto significa informar ao _persistence provider_ como cada classe deve ser persistida em uma tabela. Em boa parte, valores automaticamente fornecidos são suficientes. 
 * _Iniciar o SGBD_. Um SGBD deve estar disponível para uso. 
 * _Criar o esquema no SGBD disponível_. O mapeamento anteriormente realizado define o esquema a ser empregado pelo _persistence provider_ para persistir um objeto da classe mapeada no SGBD empregado. 
 * _Criar e executar um programa que requisita a persistência de instância da classe mapeada_.


=== Mapear a classe em questão ===
A classe anterior, após modificada para conter o mapeamento necessário, é exibida abaixo.

{{{
package um;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@Entity
public class Pessoa {
    @Id @GeneratedValue
    private Long id;
	
    private String nome;
	
    public Pessoa() {}
	
    public Pessoa(String nome) {
	this.nome = nome;
    }
	
    public String toString() {
	return nome;
    }
}
}}}

Várias são as diferenças. *@Entity* é empregada para indicar que a classe em questão é uma entidade (_EJB entity_). *@Id* e *@!GeneratedValue* indicam que a propriedade em questão, *id*, será empregada como chave na tabela onde instâncias da classe Pessoa forem persistidas. Em particular, o valor desta chave será automaticamente gerado. A outra diferença é a existência do construtor padrão (sem argumentos). Este construtor é obrigatório. Tal construtor será empregado pelo _persistence provider_ para a criação de instâncias que forem recuperadas do SGBD. 